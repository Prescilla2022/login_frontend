{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Allen/KodeHode/React/LoginSystem_Mern/frontEnd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Allen/KodeHode/React/LoginSystem_Mern/frontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Allen/KodeHode/React/LoginSystem_Mern/frontEnd/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Allen/KodeHode/React/LoginSystem_Mern/frontEnd/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Allen/KodeHode/React/LoginSystem_Mern/frontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from\"react\";import{Cookies,useCookies}from\"react-cookie\";import{useNavigate}from\"react-router-dom\";import swal from\"sweetalert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _React$useState=React.useState({username:\"\",password:\"\",rememberPassword:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),formData=_React$useState2[0],setformData=_React$useState2[1];var navigate=useNavigate();var _useCookies=useCookies([\"User\"]),_useCookies2=_slicedToArray(_useCookies,2),cookie=_useCookies2[0],setCookie=_useCookies2[1];useEffect(function(){{setformData(function(){//console.log(cookie.Name);\nreturn{username:cookie.Name,password:cookie.Password,rememberPassword:\"\"};});}},[]);function handleChange(event){setformData(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},event.target.name,event.target.value));});}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var url,requestOptions;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();//const [email,setEmail]=React.useState(\"\");\nif(formData.rememberPassword===\"on\"){setCookie(\"Name\",formData.username,{path:\"/\"});setCookie(\"Password\",formData.password,{path:\"/\"});//localStorage.setItem(formData.username,formData.password)\n}console.log(cookie);url=\"http://localhost:3500/login\";requestOptions={method:\"POST\",headers:{\"Access-Control-Allow-Origin\":\"*\",\"content-type\":\"application/json\"},body:JSON.stringify(formData)};_context.next=7;return fetch(url,requestOptions).then(function(response){console.log(response.status);if(response.status===200){//console.log(response);\n//swal(\"Logged In successfully\");\nnavigate(\"/Home\");}else{swal(\"Please enter a valid username and password\");}}).catch(function(error){return console.log(\"Form submit error\",error);});case 7:case\"end\":return _context.stop();}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"text\",name:\"username\",placeholder:\"Enter Username\",value:formData.username}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"password\",name:\"password\",placeholder:\"Enter Password\",value:formData.password}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"rememberPassword\",onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{children:\"Remember password\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"newuser\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"New User?\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/forgot\",children:\"Forgot Password?\"})]})]})]});}","map":{"version":3,"names":["React","useEffect","Cookies","useCookies","useNavigate","swal","Login","useState","username","password","rememberPassword","formData","setformData","navigate","cookie","setCookie","Name","Password","handleChange","event","prev","target","name","value","handleSubmit","preventDefault","path","console","log","url","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","status","catch","error"],"sources":["C:/Users/Allen/KodeHode/React/LoginSystem_Mern/frontEnd/src/components/Login.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Cookies, useCookies } from \"react-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport swal from \"sweetalert\";\r\n\r\nexport default function Login() {\r\n  const [formData, setformData] = React.useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    rememberPassword: \"\",\r\n  });\r\n  const navigate = useNavigate();\r\n  const [cookie, setCookie] = useCookies([\"User\"]);\r\n  useEffect(() => {\r\n    {\r\n      setformData(() => {\r\n        //console.log(cookie.Name);\r\n        return {\r\n          username: cookie.Name,\r\n          password: cookie.Password,\r\n          rememberPassword: \"\",\r\n        };\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  function handleChange(event) {\r\n    setformData((prev) => {\r\n      return {\r\n        ...prev,\r\n        [event.target.name]: event.target.value,\r\n      };\r\n    });\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    //const [email,setEmail]=React.useState(\"\");\r\n\r\n    if (formData.rememberPassword === \"on\") {\r\n      setCookie(\"Name\", formData.username, { path: \"/\" });\r\n      setCookie(\"Password\", formData.password, { path: \"/\" });\r\n      //localStorage.setItem(formData.username,formData.password)\r\n    }\r\n    console.log(cookie);\r\n\r\n    const url = \"http://localhost:3500/login\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(formData),\r\n    };\r\n\r\n    await fetch(url, requestOptions)\r\n      .then((response) => {\r\n        console.log(response.status);\r\n        if (response.status === 200) {\r\n          //console.log(response);\r\n          //swal(\"Logged In successfully\");\r\n          navigate(\"/Home\");\r\n        } else {\r\n          swal(\"Please enter a valid username and password\");\r\n        }\r\n      })\r\n      .catch((error) => console.log(\"Form submit error\", error));\r\n  }\r\n  return (\r\n    <div className=\"login\">\r\n      <h3>Login</h3>\r\n\r\n      <form className=\"form\">\r\n        <input\r\n          onChange={handleChange}\r\n          type=\"text\"\r\n          name=\"username\"\r\n          placeholder=\"Enter Username\"\r\n          value={formData.username}\r\n        ></input>\r\n        <input\r\n          onChange={handleChange}\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Enter Password\"\r\n          value={formData.password}\r\n        ></input>\r\n        <div className=\"checkbox\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"rememberPassword\"\r\n            onChange={handleChange}\r\n          ></input>\r\n          <span>Remember password</span>\r\n        </div>\r\n\r\n        <button onClick={handleSubmit} type=\"submit\">\r\n          Login\r\n        </button>\r\n\r\n        <div className=\"newuser\">\r\n          <a href=\"/register\">New User?</a>\r\n          <a href=\"/forgot\">Forgot Password?</a>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"ktBAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,OAAO,CAAEC,UAAU,KAAQ,cAAc,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,KAAI,KAAM,YAAY,CAAC,wFAE9B,cAAe,SAASC,MAAK,EAAG,CAC9B,oBAAgCN,KAAK,CAACO,QAAQ,CAAC,CAC7CC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,gBAAgB,CAAE,EACpB,CAAC,CAAC,oDAJKC,QAAQ,qBAAEC,WAAW,qBAK5B,GAAMC,SAAQ,CAAGT,WAAW,EAAE,CAC9B,gBAA4BD,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,4CAAzCW,MAAM,iBAAEC,SAAS,iBACxBd,SAAS,CAAC,UAAM,CACd,CACEW,WAAW,CAAC,UAAM,CAChB;AACA,MAAO,CACLJ,QAAQ,CAAEM,MAAM,CAACE,IAAI,CACrBP,QAAQ,CAAEK,MAAM,CAACG,QAAQ,CACzBP,gBAAgB,CAAE,EACpB,CAAC,CACH,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,QAASQ,aAAY,CAACC,KAAK,CAAE,CAC3BP,WAAW,CAAC,SAACQ,IAAI,CAAK,CACpB,sCACKA,IAAI,wBACND,KAAK,CAACE,MAAM,CAACC,IAAI,CAAGH,KAAK,CAACE,MAAM,CAACE,KAAK,GAE3C,CAAC,CAAC,CACJ,CAAC,QAEcC,aAAY,kJAA3B,iBAA4BL,KAAK,0IAC/BA,KAAK,CAACM,cAAc,EAAE,CAEtB;AAEA,GAAId,QAAQ,CAACD,gBAAgB,GAAK,IAAI,CAAE,CACtCK,SAAS,CAAC,MAAM,CAAEJ,QAAQ,CAACH,QAAQ,CAAE,CAAEkB,IAAI,CAAE,GAAI,CAAC,CAAC,CACnDX,SAAS,CAAC,UAAU,CAAEJ,QAAQ,CAACF,QAAQ,CAAE,CAAEiB,IAAI,CAAE,GAAI,CAAC,CAAC,CACvD;AACF,CACAC,OAAO,CAACC,GAAG,CAACd,MAAM,CAAC,CAEbe,GAAG,CAAG,6BAA6B,CACnCC,cAAc,CAAG,CACrBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,6BAA6B,CAAE,GAAG,CAClC,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACxB,QAAQ,CAC/B,CAAC,uBAEKyB,MAAK,CAACP,GAAG,CAAEC,cAAc,CAAC,CAC7BO,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClBX,OAAO,CAACC,GAAG,CAACU,QAAQ,CAACC,MAAM,CAAC,CAC5B,GAAID,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CAC3B;AACA;AACA1B,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAC,IAAM,CACLR,IAAI,CAAC,4CAA4C,CAAC,CACpD,CACF,CAAC,CAAC,CACDmC,KAAK,CAAC,SAACC,KAAK,QAAKd,QAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEa,KAAK,CAAC,GAAC,sDAC7D,+CACD,mBACE,aAAK,SAAS,CAAC,OAAO,wBACpB,oBAAI,OAAK,EAAK,cAEd,cAAM,SAAS,CAAC,MAAM,wBACpB,cACE,QAAQ,CAAEvB,YAAa,CACvB,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,UAAU,CACf,WAAW,CAAC,gBAAgB,CAC5B,KAAK,CAAEP,QAAQ,CAACH,QAAS,EAClB,cACT,cACE,QAAQ,CAAEU,YAAa,CACvB,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,UAAU,CACf,WAAW,CAAC,gBAAgB,CAC5B,KAAK,CAAEP,QAAQ,CAACF,QAAS,EAClB,cACT,aAAK,SAAS,CAAC,UAAU,wBACvB,cACE,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,kBAAkB,CACvB,QAAQ,CAAES,YAAa,EAChB,cACT,sBAAM,mBAAiB,EAAO,GAC1B,cAEN,eAAQ,OAAO,CAAEM,YAAa,CAAC,IAAI,CAAC,QAAQ,UAAC,OAE7C,EAAS,cAET,aAAK,SAAS,CAAC,SAAS,wBACtB,UAAG,IAAI,CAAC,WAAW,UAAC,WAAS,EAAI,cACjC,UAAG,IAAI,CAAC,SAAS,UAAC,kBAAgB,EAAI,GAClC,GACD,GACH,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}